---
import Layout from '../../layouts/Layout.astro';

const backgrounds = [
  {
    name: 'Modern Grid',
    id: 'grid',
    class: 'bg-grid',
    type: 'grid',
    css: `background-size: 40px 40px;
background-image: linear-gradient(to right, rgba(255, 255, 255, 0.05) 1px, transparent 1px),
linear-gradient(to bottom, rgba(255, 255, 255, 0.05) 1px, transparent 1px);`
  },
  {
    name: 'Dot Matrix',
    id: 'dots',
    class: 'bg-dots',
    type: 'dots',
    css: `background-size: 20px 20px;
background-image: radial-gradient(rgba(255, 255, 255, 0.1) 1px, transparent 1px);`
  },
  {
    name: 'Subtle Noise',
    id: 'noise',
    class: 'bg-noise',
    type: 'pattern',
    css: `/* Requires an svg file or data url */
background-image: url("data:image/svg+xml,%3Csvg viewBox='0 0 200 200' xmlns='http://www.w3.org/2000/svg'%3E%3Cfilter id='noiseFilter'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='0.65' numOctaves='3' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='100%25' height='100%25' filter='url(%23noiseFilter)' opacity='0.15'/%3E%3C/svg%3E");`
  },
  {
    name: 'Diagonal Stripes',
    id: 'stripes',
    class: 'bg-stripes',
    type: 'pattern',
    css: `background-image: repeating-linear-gradient(
  45deg,
  rgba(255, 255, 255, 0.03) 0px,
  rgba(255, 255, 255, 0.03) 1px,
  transparent 1px,
  transparent 10px
);`
  },
  {
    name: 'Dark Gradient',
    id: 'gradient',
    class: 'bg-gradient',
    type: 'gradient',
    css: `background: radial-gradient(circle at 50% 50%, #1a1a1a 0%, #000000 100%);`
  },
  {
    name: 'Midnight Mesh',
    id: 'mesh',
    class: 'bg-mesh',
    type: 'mesh',
    css: `background-color: #000000;
background-image: 
  radial-gradient(at 0% 0%, rgba(76, 29, 149, 0.3) 0px, transparent 50%),
  radial-gradient(at 100% 100%, rgba(37, 99, 235, 0.3) 0px, transparent 50%);`
  },
  {
    name: 'Zig Zag',
    id: 'zigzag',
    class: 'bg-zigzag',
    type: 'pattern',
    css: `background-color: #111;
background-image:  linear-gradient(135deg, #000 25%, transparent 25%),
linear-gradient(225deg, #000 25%, transparent 25%),
linear-gradient(45deg, #000 25%, transparent 25%),
linear-gradient(315deg, #000 25%, transparent 25%);
background-position:  10px 0, 10px 0, 0 0, 0 0;
background-size: 20px 20px;
background-repeat: repeat;`
  },
  {
    name: 'Polka Dots',
    id: 'polka',
    class: 'bg-polka',
    type: 'dots',
    css: `background-color: #0a0a0a;
background-image: radial-gradient(#333 1px, transparent 1px), radial-gradient(#333 1px, #0a0a0a 1px);
background-size: 20px 20px;
background-position: 0 0, 10px 10px;`
  },
  {
    name: 'Blueprint',
    id: 'blueprint',
    class: 'bg-blueprint',
    type: 'grid',
    css: `background-color: #269;
background-image: linear-gradient(rgba(255,255,255,.2) 2px, transparent 2px),
linear-gradient(90deg, rgba(255,255,255,.2) 2px, transparent 2px),
linear-gradient(rgba(255,255,255,.1) 1px, transparent 1px),
linear-gradient(90deg, rgba(255,255,255,.1) 1px, transparent 1px);
background-size: 100px 100px, 100px 100px, 20px 20px, 20px 20px;
background-position: -2px -2px, -2px -2px, -1px -1px, -1px -1px;`
  },
  {
    name: 'Graph Paper',
    id: 'paper',
    class: 'bg-paper',
    type: 'grid',
    css: `background-color: #1a1a1a;
background-image: linear-gradient(rgba(255, 255, 255, 0.05) 1px, transparent 1px),
linear-gradient(90deg, rgba(255, 255, 255, 0.05) 1px, transparent 1px);
background-size: 20px 20px;
background-position: -1px -1px;`
  },
  {
    name: 'Isometric Grid',
    id: 'iso',
    class: 'bg-iso',
    type: 'grid',
    css: `background-color: #111;
background-image: linear-gradient(30deg, #222 1px, transparent 1px),
linear-gradient(150deg, #222 1px, transparent 1px);
background-size: 40px 40px;`
  },
  {
    name: 'Diagonal Checks',
    id: 'check-diag',
    class: 'bg-check-diag',
    type: 'pattern',
    css: `background-color: #151515;
background-image: repeating-linear-gradient(45deg, #202020 25%, transparent 25%, transparent 75%, #202020 75%, #202020),
repeating-linear-gradient(45deg, #202020 25%, #151515 25%, #151515 75%, #202020 75%, #202020);
background-position: 0 0, 10px 10px;
background-size: 20px 20px;`
  },
  {
    name: 'Stars',
    id: 'stars',
    class: 'bg-stars',
    type: 'pattern',
    css: `background-color: #050510;
background-image: radial-gradient(white, rgba(255,255,255,.2) 2px, transparent 3px),
radial-gradient(white, rgba(255,255,255,.15) 1px, transparent 2px),
radial-gradient(white, rgba(255,255,255,.1) 2px, transparent 3px);
background-size: 550px 550px, 350px 350px, 250px 250px;
background-position: 0 0, 400px 600px, 300px 300px;`
  },
  {
    name: 'Circuit',
    id: 'circuit',
    class: 'bg-circuit',
    type: 'grid',
    css: `background-color: #101010;
background-image: radial-gradient(#333 1px, transparent 1px),
linear-gradient(to right, #222 1px, transparent 1px),
linear-gradient(to bottom, #222 1px, transparent 1px);
background-size: 20px 20px, 60px 60px, 60px 60px;
background-position: 0 0, 0 0, 0 0;`
  },
  {
    name: 'Sunset Mesh',
    id: 'mesh-sunset',
    class: 'bg-mesh-sunset',
    type: 'mesh',
    css: `background-color: #000;
background-image: 
  radial-gradient(at 0% 100%, rgba(200, 100, 100, 0.4) 0px, transparent 50%),
  radial-gradient(at 100% 0%, rgba(255, 100, 200, 0.3) 0px, transparent 50%),
  radial-gradient(at 50% 50%, rgba(255, 150, 50, 0.2) 0px, transparent 50%);`
  },
  {
    name: 'Ocean Mesh',
    id: 'mesh-ocean',
    class: 'bg-mesh-ocean',
    type: 'mesh',
    css: `background-color: #001;
background-image: 
  radial-gradient(at 0% 0%, rgba(0, 100, 200, 0.4) 0px, transparent 50%),
  radial-gradient(at 100% 100%, rgba(0, 200, 255, 0.3) 0px, transparent 50%),
  radial-gradient(at 50% 50%, rgba(0, 50, 100, 0.3) 0px, transparent 50%);`
  },
  {
    name: 'Aurora Mesh',
    id: 'mesh-aurora',
    class: 'bg-mesh-aurora',
    type: 'mesh',
    css: `background-color: #011;
background-image: 
  radial-gradient(at 10% 10%, rgba(50, 250, 150, 0.2) 0px, transparent 50%),
  radial-gradient(at 90% 90%, rgba(100, 50, 250, 0.3) 0px, transparent 50%),
  radial-gradient(at 50% 50%, rgba(0, 150, 150, 0.2) 0px, transparent 50%);`
  },
  {
    name: 'Candy Mesh',
    id: 'mesh-candy',
    class: 'bg-mesh-candy',
    type: 'mesh',
    css: `background-color: #101;
background-image: 
  radial-gradient(at 100% 0%, rgba(255, 100, 200, 0.3) 0px, transparent 50%),
  radial-gradient(at 0% 100%, rgba(100, 200, 255, 0.3) 0px, transparent 50%),
  radial-gradient(at 50% 50%, rgba(255, 200, 50, 0.1) 0px, transparent 50%);`
  },
  {
    name: 'Cherry Mesh',
    id: 'mesh-cherry',
    class: 'bg-mesh-cherry',
    type: 'mesh',
    css: `background-color: #200;
background-image: 
  radial-gradient(at 0% 0%, rgba(255, 50, 100, 0.4) 0px, transparent 50%),
  radial-gradient(at 100% 100%, rgba(150, 0, 50, 0.5) 0px, transparent 50%);`
  },
  {
    name: 'Emerald Mesh',
    id: 'mesh-emerald',
    class: 'bg-mesh-emerald',
    type: 'mesh',
    css: `background-color: #011;
background-image: 
  radial-gradient(at 0% 100%, rgba(0, 200, 100, 0.3) 0px, transparent 50%),
  radial-gradient(at 100% 0%, rgba(50, 255, 200, 0.2) 0px, transparent 50%);`
  },
  {
    name: 'Slate Mesh',
    id: 'mesh-slate',
    class: 'bg-mesh-slate',
    type: 'mesh',
    css: `background-color: #1a202c;
background-image: 
  radial-gradient(at 50% 0%, rgba(100, 116, 139, 0.4) 0px, transparent 50%),
  radial-gradient(at 50% 100%, rgba(51, 65, 85, 0.4) 0px, transparent 50%);`
  },
  {
    name: 'Gold Mesh',
    id: 'mesh-gold',
    class: 'bg-mesh-gold',
    type: 'mesh',
    css: `background-color: #210;
background-image: 
  radial-gradient(at 0% 0%, rgba(255, 215, 0, 0.2) 0px, transparent 50%),
  radial-gradient(at 100% 100%, rgba(218, 165, 32, 0.2) 0px, transparent 50%);`
  },
  {
    name: 'Ultraviolet Mesh',
    id: 'mesh-ultraviolet',
    class: 'bg-mesh-ultraviolet',
    type: 'mesh',
    css: `background-color: #102;
background-image: 
  radial-gradient(at 100% 0%, rgba(120, 0, 255, 0.4) 0px, transparent 50%),
  radial-gradient(at 0% 100%, rgba(50, 0, 150, 0.5) 0px, transparent 50%);`
  },
  {
    name: 'Cyber Mesh',
    id: 'mesh-cyber',
    class: 'bg-mesh-cyber',
    type: 'mesh',
    css: `background-color: #001;
background-image: 
  radial-gradient(at 0% 0%, rgba(0, 255, 255, 0.3) 0px, transparent 50%),
  radial-gradient(at 100% 100%, rgba(255, 0, 255, 0.3) 0px, transparent 50%);`
  },
  {
    name: 'Flame Mesh',
    id: 'mesh-flame',
    class: 'bg-mesh-flame',
    type: 'mesh',
    css: `background-color: #100;
background-image: 
  radial-gradient(at 50% 100%, rgba(255, 100, 0, 0.3) 0px, transparent 50%),
  radial-gradient(at 50% 0%, rgba(255, 50, 0, 0.2) 0px, transparent 50%);`
  },
  {
    name: 'Aqua Mesh',
    id: 'mesh-aqua',
    class: 'bg-mesh-aqua',
    type: 'mesh',
    css: `background-color: #011;
background-image: 
  radial-gradient(at 100% 0%, rgba(0, 255, 200, 0.3) 0px, transparent 50%),
  radial-gradient(at 0% 100%, rgba(0, 150, 255, 0.3) 0px, transparent 50%);`
  },
  {
    name: 'Regal Mesh',
    id: 'mesh-regal',
    class: 'bg-mesh-regal',
    type: 'mesh',
    css: `background-color: #101;
background-image: 
  radial-gradient(at 0% 0%, rgba(200, 0, 100, 0.2) 0px, transparent 50%),
  radial-gradient(at 100% 100%, rgba(255, 215, 0, 0.1) 0px, transparent 50%);`
  },
  {
    name: 'Steel Mesh',
    id: 'mesh-steel',
    class: 'bg-mesh-steel',
    type: 'mesh',
    css: `background-color: #222;
background-image: 
  radial-gradient(at 0% 100%, rgba(200, 200, 200, 0.2) 0px, transparent 50%),
  radial-gradient(at 100% 0%, rgba(100, 100, 100, 0.2) 0px, transparent 50%);`
  },
  {
    name: 'Divine Rays',
    id: 'rays-divine',
    class: 'bg-rays-divine',
    type: 'rays',
    css: `background-color: #111;
background-image: repeating-conic-gradient(
  from 45deg at 50% 50%,
  rgba(255, 255, 255, 0.05) 0deg 10deg,
  transparent 10deg 20deg
);`
  },
  {
    name: 'Golden Hour',
    id: 'rays-gold',
    class: 'bg-rays-gold',
    type: 'rays',
    css: `background-color: #210;
background-image: repeating-conic-gradient(
  from 0deg at 50% 100%,
  rgba(255, 200, 50, 0.1) 0deg 15deg,
  transparent 15deg 30deg
);`
  },
  {
    name: 'Midnight Beams',
    id: 'rays-mid',
    class: 'bg-rays-mid',
    type: 'rays',
    css: `background-color: #001;
background-image: repeating-conic-gradient(
  from 90deg at 0% 0%,
  rgba(100, 100, 255, 0.1) 0deg 10deg,
  transparent 10deg 30deg
);`
  }
];

// Extract unique types for filter
const types = [...new Set(backgrounds.map(bg => bg.type))];
const totalCount = backgrounds.length;
---

<Layout 
  title="CSS Background patterns | Jex" 
  description="A curated collection of modern CSS layouts and background patterns. Copy, paste, done."
>
  <div class="text-center mb-8">
    <h1 class="text-3xl font-bold bg-clip-text text-transparent bg-gradient-to-b from-gray-900 to-gray-500 dark:from-white dark:to-white/60 mb-3">CSS Backgrounds</h1>
    <p class="text-gray-600 dark:text-white/50">Curated collection of drop-in CSS background snippets.</p>
  </div>

  <!-- Counter & Filter Section -->
  <div class="mb-8 flex flex-col sm:flex-row items-center justify-between gap-4 p-4 rounded-xl bg-gray-100 dark:bg-white/5 border border-black/5 dark:border-white/10">
    <div class="flex items-center gap-3">
      <div class="flex items-center justify-center w-10 h-10 rounded-lg bg-gradient-to-br from-violet-500 to-fuchsia-500 text-white font-bold text-lg">
        <span id="visible-count">{totalCount}</span>
      </div>
      <div class="text-left">
        <p class="text-sm font-medium text-gray-900 dark:text-white">Backgrounds available</p>
        <p class="text-xs text-gray-500 dark:text-white/50" id="filter-label">All types</p>
      </div>
    </div>
    
    <!-- Filter Dropdown -->
    <div class="relative" id="filter-dropdown-container">
      <button 
        id="filter-toggle-btn"
        class="flex items-center gap-2 px-4 py-2 text-sm font-medium rounded-lg bg-gray-200 dark:bg-white/10 text-gray-700 dark:text-white/80 hover:bg-gray-300 dark:hover:bg-white/20 transition-all border border-black/5 dark:border-white/10"
      >
        <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="size-4">
          <path stroke-linecap="round" stroke-linejoin="round" d="M12 3c2.755 0 5.455.232 8.083.678.533.09.917.556.917 1.096v1.044a2.25 2.25 0 0 1-.659 1.591l-5.432 5.432a2.25 2.25 0 0 0-.659 1.591v2.927a2.25 2.25 0 0 1-1.244 2.013L9.75 21v-6.568a2.25 2.25 0 0 0-.659-1.591L3.659 7.409A2.25 2.25 0 0 1 3 5.818V4.774c0-.54.384-1.006.917-1.096A48.32 48.32 0 0 1 12 3Z" />
        </svg>
        <span id="selected-filter">All</span>
        <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" class="size-3 transition-transform" id="dropdown-arrow">
          <path stroke-linecap="round" stroke-linejoin="round" d="m19.5 8.25-7.5 7.5-7.5-7.5" />
        </svg>
      </button>
      
      <!-- Dropdown Menu -->
      <div 
        id="filter-dropdown"
        class="absolute right-0 top-full mt-2 w-48 py-2 bg-white dark:bg-[#1a1a1a] rounded-xl border border-black/10 dark:border-white/10 shadow-xl opacity-0 invisible translate-y-2 transition-all duration-200 z-50"
      >
        <button 
          class="filter-btn w-full px-4 py-2 text-left text-sm font-medium text-gray-900 dark:text-white hover:bg-gray-100 dark:hover:bg-white/10 transition-colors flex items-center justify-between"
          data-type="all"
        >
          <span>All</span>
          <span class="text-xs text-gray-400 dark:text-white/40">{totalCount}</span>
        </button>
        {types.map((type) => (
          <button 
            class="filter-btn w-full px-4 py-2 text-left text-sm font-medium text-gray-700 dark:text-white/70 hover:bg-gray-100 dark:hover:bg-white/10 transition-colors capitalize flex items-center justify-between"
            data-type={type}
          >
            <span>{type}</span>
            <span class="text-xs text-gray-400 dark:text-white/40">{backgrounds.filter(bg => bg.type === type).length}</span>
          </button>
        ))}
      </div>
    </div>
  </div>

  <!-- Main Previewer -->
   
  <div class="mb-12 relative group rounded-2xl overflow-hidden border border-black/10 dark:border-white/10 shadow-lg transition-all duration-500 min-h-[300px] " id="main-preview">
    <div class="absolute inset-0 transition-all duration-500" id="preview-bg"></div>
    
    <!-- Preview Content -->
    <div class="relative divide-x divide-white/10 z-10 py-2 px-4 bg-black/40 rounded-br-2xl border-r border-b border-white/10 w-max flex items-center gap-4">
      <h2 class="text-md font-medium text-white pr-3">Live Preview</h2>
      <div class="flex gap-4 items-center">
        <button class="p-2 rounded-md hover:bg-black/20 border border-transparent hover:border-white/5 transition-colors " id="fullscreen-btn">
          <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="size-5">
  <path stroke-linecap="round" stroke-linejoin="round" d="M3.75 3.75v4.5m0-4.5h4.5m-4.5 0L9 9M3.75 20.25v-4.5m0 4.5h4.5m-4.5 0L9 15M20.25 3.75h-4.5m4.5 0v4.5m0-4.5L15 9m5.25 11.25h-4.5m4.5 0v-4.5m0 4.5L15 15" />
</svg>

        </button>
        
      </div>
    </div>
  </div>

  <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6" id="backgrounds-grid">
    {backgrounds.map((bg) => (
      <div 
        class="group relative bg-white dark:bg-[#111] border border-black/5 dark:border-white/10 rounded-xl overflow-hidden hover:border-black/20 dark:hover:border-white/20 transition-all shadow-sm dark:shadow-none cursor-pointer bg-card-item"
        data-class={bg.class}
        data-css={bg.css}
        data-type={bg.type}
      >
        <!-- Preview -->
        <div class={`h-48 w-full ${bg.class}`} id={`preview-${bg.id}`}></div>
        
        <!-- Info & Actions -->
        <div class="p-4 flex items-center justify-between border-t border-black/5 dark:border-white/5 bg-gray-50 dark:bg-[#0a0a0a]">
           <div class="flex items-center gap-2">
             <span class="font-medium text-gray-800 dark:text-white/80">{bg.name}</span>
             <span class="px-2 py-0.5 text-[10px] font-medium rounded-full bg-gray-200 dark:bg-white/10 text-gray-500 dark:text-white/50 capitalize">{bg.type}</span>
           </div>
           <button class="copy-btn px-3 py-1.5 text-xs font-medium rounded-lg bg-gray-200 dark:bg-white/10 hover:bg-gray-300 dark:hover:bg-white/20 text-gray-900 dark:text-white transition-colors" data-css={bg.css}>
             Copy CSS
           </button>
        </div>
      </div>
    ))}
  </div>
</Layout>

<style>
  /* Note: These previews are hardcoded to "dark" aesthetics because they illustrate "backgrounds" which happen to be dark in this collection. 
     If we wanted light versions we'd need alternative CSS for light mode. 
     For now, we keep the previews as is because they represent specific snippets. */
     
  .bg-grid {
    background-color: #1a1a1a;
    background-size: 40px 40px;
    background-image: linear-gradient(to right, rgba(255, 255, 255, 0.05) 1px, transparent 1px),
    linear-gradient(to bottom, rgba(255, 255, 255, 0.05) 1px, transparent 1px);
  }
  .bg-dots {
    background-color: #1a1a1a;
    background-size: 20px 20px;
    background-image: radial-gradient(rgba(255, 255, 255, 0.1) 1px, transparent 1px);
  }
  .bg-noise {
    background-color: #1a1a1a;
    background-image: url("data:image/svg+xml,%3Csvg viewBox='0 0 200 200' xmlns='http://www.w3.org/2000/svg'%3E%3Cfilter id='noiseFilter'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='0.65' numOctaves='3' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='100%25' height='100%25' filter='url(%23noiseFilter)' opacity='0.15'/%3E%3C/svg%3E");
  }
  .bg-stripes {
    background-color: #1a1a1a;
    background-image: repeating-linear-gradient(
      45deg,
      rgba(255, 255, 255, 0.03) 0px,
      rgba(255, 255, 255, 0.03) 1px,
      transparent 1px,
      transparent 10px
    );
  }
  .bg-gradient {
    background: radial-gradient(circle at 50% 50%, #1a1a1a 0%, #000000 100%);
  }
  .bg-mesh {
    background-color: #000000;
    background-image: 
      radial-gradient(at 0% 0%, rgba(76, 29, 149, 0.3) 0px, transparent 50%),
      radial-gradient(at 100% 100%, rgba(37, 99, 235, 0.3) 0px, transparent 50%);
  }
  .bg-zigzag {
    background-color: #111;
    background-image:  linear-gradient(135deg, #000 25%, transparent 25%),
    linear-gradient(225deg, #000 25%, transparent 25%),
    linear-gradient(45deg, #000 25%, transparent 25%),
    linear-gradient(315deg, #000 25%, transparent 25%);
    background-position:  10px 0, 10px 0, 0 0, 0 0;
    background-size: 20px 20px;
    background-repeat: repeat;
  }
  .bg-polka {
    background-color: #0a0a0a;
    background-image: radial-gradient(#333 1px, transparent 1px), radial-gradient(#333 1px, #0a0a0a 1px);
    background-size: 20px 20px;
    background-position: 0 0, 10px 10px;
  }
  .bg-blueprint {
    background-color: #269;
    background-image: linear-gradient(rgba(255,255,255,.2) 2px, transparent 2px),
    linear-gradient(90deg, rgba(255,255,255,.2) 2px, transparent 2px),
    linear-gradient(rgba(255,255,255,.1) 1px, transparent 1px),
    linear-gradient(90deg, rgba(255,255,255,.1) 1px, transparent 1px);
    background-size: 100px 100px, 100px 100px, 20px 20px, 20px 20px;
    background-position: -2px -2px, -2px -2px, -1px -1px, -1px -1px;
  }
  .bg-paper {
    background-color: #1a1a1a;
    background-image: linear-gradient(rgba(255, 255, 255, 0.05) 1px, transparent 1px),
    linear-gradient(90deg, rgba(255, 255, 255, 0.05) 1px, transparent 1px);
    background-size: 20px 20px;
    background-position: -1px -1px;
  }
  .bg-iso {
    background-color: #111;
    background-image: linear-gradient(30deg, #222 1px, transparent 1px),
    linear-gradient(150deg, #222 1px, transparent 1px);
    background-size: 40px 40px;
  }
  .bg-check-diag {
    background-color: #151515;
    background-image: repeating-linear-gradient(45deg, #202020 25%, transparent 25%, transparent 75%, #202020 75%, #202020),
    repeating-linear-gradient(45deg, #202020 25%, #151515 25%, #151515 75%, #202020 75%, #202020);
    background-position: 0 0, 10px 10px;
    background-size: 20px 20px;
  }
  .bg-stars {
    background-color: #050510;
    background-image: radial-gradient(white, rgba(255,255,255,.2) 2px, transparent 3px),
    radial-gradient(white, rgba(255,255,255,.15) 1px, transparent 2px),
    radial-gradient(white, rgba(255,255,255,.1) 2px, transparent 3px);
    background-size: 550px 550px, 350px 350px, 250px 250px;
    background-position: 0 0, 400px 600px, 300px 300px;
  }
  .bg-circuit {
    background-color: #101010;
    background-image: radial-gradient(#333 1px, transparent 1px),
    linear-gradient(to right, #222 1px, transparent 1px),
    linear-gradient(to bottom, #222 1px, transparent 1px);
    background-size: 20px 20px, 60px 60px, 60px 60px;
    background-position: 0 0, 0 0, 0 0;
  }
  .bg-mesh-sunset {
    background-color: #000;
    background-image: 
      radial-gradient(at 0% 100%, rgba(200, 100, 100, 0.4) 0px, transparent 50%),
      radial-gradient(at 100% 0%, rgba(255, 100, 200, 0.3) 0px, transparent 50%),
      radial-gradient(at 50% 50%, rgba(255, 150, 50, 0.2) 0px, transparent 50%);
  }
  .bg-mesh-ocean {
    background-color: #001;
    background-image: 
      radial-gradient(at 0% 0%, rgba(0, 100, 200, 0.4) 0px, transparent 50%),
      radial-gradient(at 100% 100%, rgba(0, 200, 255, 0.3) 0px, transparent 50%),
      radial-gradient(at 50% 50%, rgba(0, 50, 100, 0.3) 0px, transparent 50%);
  }
  .bg-mesh-aurora {
    background-color: #011;
    background-image: 
      radial-gradient(at 10% 10%, rgba(50, 250, 150, 0.2) 0px, transparent 50%),
      radial-gradient(at 90% 90%, rgba(100, 50, 250, 0.3) 0px, transparent 50%),
      radial-gradient(at 50% 50%, rgba(0, 150, 150, 0.2) 0px, transparent 50%);
  }
  .bg-mesh-candy {
    background-color: #101;
    background-image: 
      radial-gradient(at 100% 0%, rgba(255, 100, 200, 0.3) 0px, transparent 50%),
      radial-gradient(at 0% 100%, rgba(100, 200, 255, 0.3) 0px, transparent 50%),
      radial-gradient(at 50% 50%, rgba(255, 200, 50, 0.1) 0px, transparent 50%);
  }
  .bg-mesh-cherry {
    background-color: #200;
    background-image: 
      radial-gradient(at 0% 0%, rgba(255, 50, 100, 0.4) 0px, transparent 50%),
      radial-gradient(at 100% 100%, rgba(150, 0, 50, 0.5) 0px, transparent 50%);
  }
  .bg-mesh-emerald {
    background-color: #011;
    background-image: 
      radial-gradient(at 0% 100%, rgba(0, 200, 100, 0.3) 0px, transparent 50%),
      radial-gradient(at 100% 0%, rgba(50, 255, 200, 0.2) 0px, transparent 50%);
  }
  .bg-mesh-slate {
    background-color: #1a202c;
    background-image: 
      radial-gradient(at 50% 0%, rgba(100, 116, 139, 0.4) 0px, transparent 50%),
      radial-gradient(at 50% 100%, rgba(51, 65, 85, 0.4) 0px, transparent 50%);
  }
  .bg-mesh-gold {
    background-color: #210;
    background-image: 
      radial-gradient(at 0% 0%, rgba(255, 215, 0, 0.2) 0px, transparent 50%),
      radial-gradient(at 100% 100%, rgba(218, 165, 32, 0.2) 0px, transparent 50%);
  }
  .bg-mesh-ultraviolet {
    background-color: #102;
    background-image: 
      radial-gradient(at 100% 0%, rgba(120, 0, 255, 0.4) 0px, transparent 50%),
      radial-gradient(at 0% 100%, rgba(50, 0, 150, 0.5) 0px, transparent 50%);
  }
  .bg-mesh-cyber {
    background-color: #001;
    background-image: 
      radial-gradient(at 0% 0%, rgba(0, 255, 255, 0.3) 0px, transparent 50%),
      radial-gradient(at 100% 100%, rgba(255, 0, 255, 0.3) 0px, transparent 50%);
  }
  .bg-mesh-flame {
    background-color: #100;
    background-image: 
      radial-gradient(at 50% 100%, rgba(255, 100, 0, 0.3) 0px, transparent 50%),
      radial-gradient(at 50% 0%, rgba(255, 50, 0, 0.2) 0px, transparent 50%);
  }
  .bg-mesh-aqua {
    background-color: #011;
    background-image: 
      radial-gradient(at 100% 0%, rgba(0, 255, 200, 0.3) 0px, transparent 50%),
      radial-gradient(at 0% 100%, rgba(0, 150, 255, 0.3) 0px, transparent 50%);
  }
  .bg-mesh-regal {
    background-color: #101;
    background-image: 
      radial-gradient(at 0% 0%, rgba(200, 0, 100, 0.2) 0px, transparent 50%),
      radial-gradient(at 100% 100%, rgba(255, 215, 0, 0.1) 0px, transparent 50%);
  }
  .bg-mesh-steel {
    background-color: #222;
    background-image: 
      radial-gradient(at 0% 100%, rgba(200, 200, 200, 0.2) 0px, transparent 50%),
      radial-gradient(at 100% 0%, rgba(100, 100, 100, 0.2) 0px, transparent 50%);
  }
  .bg-rays-divine {
    background-color: #111;
    background-image: repeating-conic-gradient(
      from 45deg at 50% 50%,
      rgba(255, 255, 255, 0.05) 0deg 10deg,
      transparent 10deg 20deg
    );
  }
  .bg-rays-gold {
    background-color: #210;
    background-image: repeating-conic-gradient(
      from 0deg at 50% 100%,
      rgba(255, 200, 50, 0.1) 0deg 15deg,
      transparent 15deg 30deg
    );
  }
  .bg-rays-mid {
    background-color: #001;
    background-image: repeating-conic-gradient(
      from 90deg at 0% 0%,
      rgba(100, 100, 255, 0.1) 0deg 10deg,
      transparent 10deg 30deg
    );
  }
</style>

<script>
  document.querySelectorAll('.copy-btn').forEach(button => {
    const btn = button as HTMLElement;
    btn.addEventListener('click', (e) => {
      e.stopPropagation(); // Prevent triggering preview when clicking copy
      const css = btn.dataset.css || '';
      navigator.clipboard.writeText(css);
      
      const originalText = btn.innerText;
      btn.innerText = 'Copied!';
      btn.classList.add('bg-green-100', 'dark:bg-green-500/20', 'text-green-600', 'dark:text-green-400');
      btn.classList.remove('bg-gray-200', 'dark:bg-white/10', 'text-gray-900', 'dark:text-white');
      
      setTimeout(() => {
        btn.innerText = originalText;
        btn.classList.remove('bg-green-100', 'dark:bg-green-500/20', 'text-green-600', 'dark:text-green-400');
        btn.classList.add('bg-gray-200', 'dark:bg-white/10', 'text-gray-900', 'dark:text-white');
      }, 2000);
    });
  });

  // Preview Logic
  const previewBg = document.getElementById('preview-bg');
  const mainPreview = document.getElementById('main-preview');
  const fullscreenBtn = document.getElementById('fullscreen-btn');
  const resetBtn = document.getElementById('reset-btn');
  const visibleCount = document.getElementById('visible-count');
  const filterBtns = document.querySelectorAll('.filter-btn');
  const cards = document.querySelectorAll('.bg-card-item');
  const filterToggleBtn = document.getElementById('filter-toggle-btn');
  const filterDropdown = document.getElementById('filter-dropdown');
  const selectedFilter = document.getElementById('selected-filter');
  const filterLabel = document.getElementById('filter-label');
  const dropdownArrow = document.getElementById('dropdown-arrow');
  let currentClass = 'bg-grid';
  let isDropdownOpen = false;
  
  // Set initial preview
  previewBg?.classList.add(currentClass);

  // Dropdown Toggle
  function toggleDropdown() {
    isDropdownOpen = !isDropdownOpen;
    if (filterDropdown) {
      if (isDropdownOpen) {
        filterDropdown.classList.remove('opacity-0', 'invisible', 'translate-y-2');
        filterDropdown.classList.add('opacity-100', 'visible', 'translate-y-0');
        dropdownArrow?.classList.add('rotate-180');
      } else {
        filterDropdown.classList.add('opacity-0', 'invisible', 'translate-y-2');
        filterDropdown.classList.remove('opacity-100', 'visible', 'translate-y-0');
        dropdownArrow?.classList.remove('rotate-180');
      }
    }
  }

  function closeDropdown() {
    isDropdownOpen = false;
    if (filterDropdown) {
      filterDropdown.classList.add('opacity-0', 'invisible', 'translate-y-2');
      filterDropdown.classList.remove('opacity-100', 'visible', 'translate-y-0');
      dropdownArrow?.classList.remove('rotate-180');
    }
  }

  filterToggleBtn?.addEventListener('click', (e) => {
    e.stopPropagation();
    toggleDropdown();
  });

  // Close dropdown when clicking outside
  document.addEventListener('click', (e) => {
    const container = document.getElementById('filter-dropdown-container');
    if (container && !container.contains(e.target as Node)) {
      closeDropdown();
    }
  });

  // Filter Logic
  filterBtns.forEach(btn => {
    btn.addEventListener('click', () => {
      const type = (btn as HTMLElement).dataset.type || 'all';
      const typeName = type === 'all' ? 'Tous' : type.charAt(0).toUpperCase() + type.slice(1);
      
      // Update selected filter text
      if (selectedFilter) {
        selectedFilter.textContent = typeName;
      }
      
      // Update filter label
      if (filterLabel) {
        filterLabel.textContent = type === 'all' ? 'Tous les types' : `Type: ${typeName}`;
      }
      
      // Filter cards
      let count = 0;
      cards.forEach(card => {
        const cardType = (card as HTMLElement).dataset.type;
        if (type === 'all' || cardType === type) {
          (card as HTMLElement).style.display = '';
          count++;
        } else {
          (card as HTMLElement).style.display = 'none';
        }
      });
      
      // Update counter
      if (visibleCount) {
        visibleCount.textContent = count.toString();
      }
      
      // Close dropdown
      closeDropdown();
    });
  });

  document.querySelectorAll('.bg-card-item').forEach(card => {
    card.addEventListener('click', () => {
      if (!previewBg) return;
      
      const newClass = (card as HTMLElement).dataset.class || '';
      
      if (currentClass) {
        previewBg.classList.remove(currentClass);
      }
      
      previewBg.classList.add(newClass);
      currentClass = newClass;
    });
  });

  fullscreenBtn?.addEventListener('click', () => {
    if (!mainPreview) return;
    
    if (!document.fullscreenElement) {
      // Enter fullscreen
      mainPreview.requestFullscreen().catch((err) => {
        console.error(`Error attempting to enable fullscreen: ${err.message} (${err.name})`);
      });
    } else {
      // Exit fullscreen
      document.exitFullscreen();
    }
  });

  // Update button text on fullscreen change
  document.addEventListener('fullscreenchange', () => {
    if (fullscreenBtn) {
      if (document.fullscreenElement) {
        fullscreenBtn.innerHTML = '<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="size-5"> <path stroke-linecap="round" stroke-linejoin="round" d="M9 9V4.5M9 9H4.5M9 9 3.75 3.75M9 15v4.5M9 15H4.5M9 15l-5.25 5.25M15 9h4.5M15 9V4.5M15 9l5.25-5.25M15 15h4.5M15 15v4.5m0-4.5 5.25 5.25" /></svg>';
      } else {
        fullscreenBtn.innerHTML = '<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="size-5"><path stroke-linecap="round" stroke-linejoin="round" d="M3.75 3.75v4.5m0-4.5h4.5m-4.5 0L9 9M3.75 20.25v-4.5m0 4.5h4.5m-4.5 0L9 15M20.25 3.75h-4.5m4.5 0v4.5m0-4.5L15 9m5.25 11.25h-4.5m4.5 0v-4.5m0 4.5L15 15" /></svg>';
      }
    }
  });

  resetBtn?.addEventListener('click', () => {
    if (!previewBg) return;
    if (currentClass) previewBg.classList.remove(currentClass);
    currentClass = 'bg-grid';
    previewBg.classList.add(currentClass);
  });
</script>
